
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_examples/1_mean_risk/plot_13_factor_model.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_auto_examples_1_mean_risk_plot_13_factor_model.py>`
        to download the full example code. or to run this example in your browser via Binder

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_examples_1_mean_risk_plot_13_factor_model.py:


============
Factor Model
============

This tutorial shows how to use the :class:`~skfolio.prior.FactorModel` estimator in
the :class:`~skfolio.optimization.MeanRisk` optimization.

A :ref:`prior estimator <prior>` fits a :class:`~skfolio.prior.PriorModel` containing
the distribution estimate of asset returns. It represents the investor's prior beliefs
about the model used to estimate such distribution.

The `PriorModel` is a dataclass containing:

    * `mu`: Expected returns estimation
    * `covariance`: Covariance matrix estimation
    * `returns`: assets returns estimation
    * `cholesky` : Lower-triangular Cholesky factor of the covariance estimation (optional)

The `FactorModel` estimator estimates the :class:`PriorModel` using a factor model and a
:ref:`prior estimator <prior>` of the factor's returns. The purpose of factor models is
to impose a structure on financial variables and their covariance matrix by explaining
them through a small number of common factors. This can help overcome estimation
error by reducing the number of parameters, i.e., the dimensionality of the estimation
problem, making portfolio optimization more robust against noise in the data. Factor
models also provide a decomposition of financial risk to systematic and security
specific components.

To be compatible with `scikit-learn`, the `fit` method takes `X` as the assets returns
and `y` as the factors returns. Note that `y` is in lowercase even for a 2D array
(more than one factor). This is for consistency with the scikit-learn API.

In this tutorial we will build a Maximum Sharpe Ratio portfolio using the `FactorModel`
estimator.

.. GENERATED FROM PYTHON SOURCE LINES 38-43

Data
====
We load the S&P 500 :ref:`dataset <datasets>` composed of the daily prices of 20
assets from the SPX Index composition and the Factors dataset composed of the daily
prices of 5 ETF representing common factors:

.. GENERATED FROM PYTHON SOURCE LINES 43-63

.. code-block:: Python

    from plotly.io import show
    from sklearn.linear_model import RidgeCV
    from sklearn.model_selection import train_test_split

    from skfolio import Population, RiskMeasure
    from skfolio.datasets import load_factors_dataset, load_sp500_dataset
    from skfolio.moments import GerberCovariance, ShrunkMu
    from skfolio.optimization import MeanRisk, ObjectiveFunction
    from skfolio.preprocessing import prices_to_returns
    from skfolio.prior import EmpiricalPrior, FactorModel, LoadingMatrixRegression

    prices = load_sp500_dataset()
    factor_prices = load_factors_dataset()

    prices = prices["2014":]
    factor_prices = factor_prices["2014":]

    X, y = prices_to_returns(prices, factor_prices)
    X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.33, shuffle=False)








.. GENERATED FROM PYTHON SOURCE LINES 64-68

Factor Model
=============
We create a Maximum Sharpe Ratio model using the Factor Model that we fit on the
training set:

.. GENERATED FROM PYTHON SOURCE LINES 68-77

.. code-block:: Python

    model_factor_1 = MeanRisk(
        risk_measure=RiskMeasure.VARIANCE,
        objective_function=ObjectiveFunction.MAXIMIZE_RATIO,
        prior_estimator=FactorModel(),
        portfolio_params=dict(name="Factor Model 1"),
    )
    model_factor_1.fit(X_train, y_train)
    model_factor_1.weights_





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    array([1.22188511e-09, 1.31737525e-03, 4.74253021e-10, 7.70440099e-10,
           9.46436338e-10, 1.24959219e-09, 5.13001762e-02, 6.35652050e-02,
           7.36336705e-10, 1.79104637e-01, 5.03133290e-02, 7.13696569e-02,
           4.12895735e-02, 2.27967880e-01, 5.13346758e-02, 1.44128512e-01,
           2.88142338e-10, 6.19657594e-02, 5.63432134e-02, 1.09849875e-09])



.. GENERATED FROM PYTHON SOURCE LINES 78-86

We can change the :class:`~skfolio.prior.BaseLoadingMatrix` that estimates the loading
matrix (betas) of the factors.

The default is the :class:`LoadingMatrixRegression`, which fit the factors using a
`LassoCV` on each asset separately.

For example, let's change the `LassoCV` into a `RidgeCV` without intercept and use
parallelization:

.. GENERATED FROM PYTHON SOURCE LINES 86-99

.. code-block:: Python

    model_factor_2 = MeanRisk(
        risk_measure=RiskMeasure.VARIANCE,
        objective_function=ObjectiveFunction.MAXIMIZE_RATIO,
        prior_estimator=FactorModel(
            loading_matrix_estimator=LoadingMatrixRegression(
                linear_regressor=RidgeCV(fit_intercept=False), n_jobs=-1
            )
        ),
        portfolio_params=dict(name="Factor Model 2"),
    )
    model_factor_2.fit(X_train, y_train)
    model_factor_2.weights_





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    array([3.97776252e-02, 6.57851861e-03, 2.18408031e-02, 8.98298183e-03,
           3.16206284e-02, 1.42391438e-02, 8.00175085e-02, 8.32124541e-02,
           4.74823262e-02, 8.59482204e-02, 4.59789920e-02, 5.91802980e-02,
           8.42282444e-02, 1.05685439e-01, 6.43876113e-02, 7.94746608e-02,
           4.31092783e-08, 5.23719260e-02, 4.35228602e-02, 4.54697151e-02])



.. GENERATED FROM PYTHON SOURCE LINES 100-106

We can also change the :ref:`prior estimator <prior>` of the factors.
It is used to estimate the :class:`~skfolio.prior.PriorModel` containing the factors
expected returns and covariance matrix.

For example, let's estimate the factors expected returns with James-Stein shrinkage
and the factors covariance matrix with the Gerber covariance estimator:

.. GENERATED FROM PYTHON SOURCE LINES 106-119

.. code-block:: Python

    model_factor_3 = MeanRisk(
        risk_measure=RiskMeasure.VARIANCE,
        objective_function=ObjectiveFunction.MAXIMIZE_RATIO,
        prior_estimator=FactorModel(
            factor_prior_estimator=EmpiricalPrior(
                mu_estimator=ShrunkMu(), covariance_estimator=GerberCovariance()
            )
        ),
        portfolio_params=dict(name="Factor Model 3"),
    )
    model_factor_3.fit(X_train, y_train)
    model_factor_3.weights_





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    array([4.48283750e-12, 4.49645166e-12, 3.48850261e-13, 5.59880563e-13,
           4.22380709e-13, 5.12492676e-13, 1.68739416e-02, 2.26134346e-11,
           4.33953561e-13, 6.45574521e-02, 6.24004576e-02, 9.61481439e-02,
           3.68197345e-01, 2.44687699e-01, 5.21327461e-12, 8.72794158e-11,
           1.77006663e-13, 1.47134961e-01, 2.66255502e-12, 4.78965839e-13])



.. GENERATED FROM PYTHON SOURCE LINES 120-124

Factor Analysis
===============
Each fitted estimator is saved with a trailing underscore.
For example, we can access the fitted prior estimator with:

.. GENERATED FROM PYTHON SOURCE LINES 124-126

.. code-block:: Python

    prior_estimator = model_factor_3.prior_estimator_








.. GENERATED FROM PYTHON SOURCE LINES 127-128

We can access the prior model with:

.. GENERATED FROM PYTHON SOURCE LINES 128-130

.. code-block:: Python

    prior_model = prior_estimator.prior_model_








.. GENERATED FROM PYTHON SOURCE LINES 131-132

We can access the loading matrix with:

.. GENERATED FROM PYTHON SOURCE LINES 132-134

.. code-block:: Python

    loading_matrix = prior_estimator.loading_matrix_estimator_.loading_matrix_








.. GENERATED FROM PYTHON SOURCE LINES 135-139

Empirical Model
===============
For comparison, we also create a Maximum Sharpe Ratio model using the default
Empirical estimator:

.. GENERATED FROM PYTHON SOURCE LINES 139-147

.. code-block:: Python

    model_empirical = MeanRisk(
        risk_measure=RiskMeasure.VARIANCE,
        objective_function=ObjectiveFunction.MAXIMIZE_RATIO,
        portfolio_params=dict(name="Empirical"),
    )
    model_empirical.fit(X_train)
    model_empirical.weights_





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    array([1.01562655e-01, 7.81176235e-02, 1.48598568e-11, 1.89116954e-02,
           7.18538495e-12, 3.64582189e-12, 1.10584830e-01, 2.88210632e-11,
           3.64220700e-11, 8.95142106e-11, 1.62632716e-01, 4.66785730e-11,
           1.77784307e-01, 9.61513792e-02, 1.10083470e-11, 9.72248235e-03,
           1.74361693e-12, 2.44532312e-01, 4.38087390e-11, 5.50514320e-12])



.. GENERATED FROM PYTHON SOURCE LINES 148-151

Prediction
==========
We predict all models on the test set:

.. GENERATED FROM PYTHON SOURCE LINES 151-163

.. code-block:: Python

    ptf_factor_1_test = model_factor_1.predict(X_test)
    ptf_factor_2_test = model_factor_2.predict(X_test)
    ptf_factor_3_test = model_factor_3.predict(X_test)
    ptf_empirical_test = model_empirical.predict(X_test)

    population = Population(
        [ptf_factor_1_test, ptf_factor_2_test, ptf_factor_3_test, ptf_empirical_test]
    )

    fig = population.plot_cumulative_returns()
    show(fig)




.. raw:: html
    :file: images/sphx_glr_plot_13_factor_model_001.html





.. GENERATED FROM PYTHON SOURCE LINES 164-167

|

Let's plot the portfolios' composition:

.. GENERATED FROM PYTHON SOURCE LINES 167-168

.. code-block:: Python

    population.plot_composition()





.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>                        <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
            <script charset="utf-8" src="https://cdn.plot.ly/plotly-2.32.0.min.js"></script>                <div id="66b54105-fe78-4267-85eb-c9d9e6b0da0d" class="plotly-graph-div" style="height:100%; width:100%;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("66b54105-fe78-4267-85eb-c9d9e6b0da0d")) {                    Plotly.newPlot(                        "66b54105-fe78-4267-85eb-c9d9e6b0da0d",                        [{"alignmentgroup":"True","hovertemplate":"asset=PEP\u003cbr\u003eindex=%{x}\u003cbr\u003evalue=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"PEP","marker":{"color":"#636efa","pattern":{"shape":""}},"name":"PEP","offsetgroup":"PEP","orientation":"v","showlegend":true,"textposition":"auto","x":["Factor Model 1","Factor Model 2","Factor Model 3","Empirical"],"xaxis":"x","y":[0.22796787985131434,0.10568543898992426,0.244687699016434,0.09615137923621382],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"asset=KO\u003cbr\u003eindex=%{x}\u003cbr\u003evalue=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"KO","marker":{"color":"#EF553B","pattern":{"shape":""}},"name":"KO","offsetgroup":"KO","orientation":"v","showlegend":true,"textposition":"auto","x":["Factor Model 1","Factor Model 2","Factor Model 3","Empirical"],"xaxis":"x","y":[0.17910463650566152,0.08594822038323073,0.06455745210379885,0.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"asset=PG\u003cbr\u003eindex=%{x}\u003cbr\u003evalue=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"PG","marker":{"color":"#00cc96","pattern":{"shape":""}},"name":"PG","offsetgroup":"PG","orientation":"v","showlegend":true,"textposition":"auto","x":["Factor Model 1","Factor Model 2","Factor Model 3","Empirical"],"xaxis":"x","y":[0.14412851245777925,0.07947466082467051,0.0,0.009722482350150961],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"asset=MRK\u003cbr\u003eindex=%{x}\u003cbr\u003evalue=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"MRK","marker":{"color":"#ab63fa","pattern":{"shape":""}},"name":"MRK","offsetgroup":"MRK","orientation":"v","showlegend":true,"textposition":"auto","x":["Factor Model 1","Factor Model 2","Factor Model 3","Empirical"],"xaxis":"x","y":[0.0713696568945749,0.05918029800492671,0.09614814393020463,0.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"asset=JNJ\u003cbr\u003eindex=%{x}\u003cbr\u003evalue=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"JNJ","marker":{"color":"#FFA15A","pattern":{"shape":""}},"name":"JNJ","offsetgroup":"JNJ","orientation":"v","showlegend":true,"textposition":"auto","x":["Factor Model 1","Factor Model 2","Factor Model 3","Empirical"],"xaxis":"x","y":[0.06356520499324957,0.08321245409361826,0.0,0.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"asset=UNH\u003cbr\u003eindex=%{x}\u003cbr\u003evalue=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"UNH","marker":{"color":"#19d3f3","pattern":{"shape":""}},"name":"UNH","offsetgroup":"UNH","orientation":"v","showlegend":true,"textposition":"auto","x":["Factor Model 1","Factor Model 2","Factor Model 3","Empirical"],"xaxis":"x","y":[0.06196575935090911,0.052371926010476945,0.14713496057954037,0.2445323121880236],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"asset=WMT\u003cbr\u003eindex=%{x}\u003cbr\u003evalue=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"WMT","marker":{"color":"#FF6692","pattern":{"shape":""}},"name":"WMT","offsetgroup":"WMT","orientation":"v","showlegend":true,"textposition":"auto","x":["Factor Model 1","Factor Model 2","Factor Model 3","Empirical"],"xaxis":"x","y":[0.05634321340055453,0.04352286023509315,0.0,0.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"asset=PFE\u003cbr\u003eindex=%{x}\u003cbr\u003evalue=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"PFE","marker":{"color":"#B6E880","pattern":{"shape":""}},"name":"PFE","offsetgroup":"PFE","orientation":"v","showlegend":true,"textposition":"auto","x":["Factor Model 1","Factor Model 2","Factor Model 3","Empirical"],"xaxis":"x","y":[0.05133467579788762,0.06438761127159538,0.0,0.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"asset=HD\u003cbr\u003eindex=%{x}\u003cbr\u003evalue=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"HD","marker":{"color":"#FF97FF","pattern":{"shape":""}},"name":"HD","offsetgroup":"HD","orientation":"v","showlegend":true,"textposition":"auto","x":["Factor Model 1","Factor Model 2","Factor Model 3","Empirical"],"xaxis":"x","y":[0.051300176162149,0.08001750851495086,0.016873941556635217,0.11058482975645972],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"asset=LLY\u003cbr\u003eindex=%{x}\u003cbr\u003evalue=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"LLY","marker":{"color":"#FECB52","pattern":{"shape":""}},"name":"LLY","offsetgroup":"LLY","orientation":"v","showlegend":true,"textposition":"auto","x":["Factor Model 1","Factor Model 2","Factor Model 3","Empirical"],"xaxis":"x","y":[0.050313329013436894,0.04597899198847051,0.062400457600441564,0.16263271562300127],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"asset=MSFT\u003cbr\u003eindex=%{x}\u003cbr\u003evalue=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"MSFT","marker":{"color":"#636efa","pattern":{"shape":""}},"name":"MSFT","offsetgroup":"MSFT","orientation":"v","showlegend":true,"textposition":"auto","x":["Factor Model 1","Factor Model 2","Factor Model 3","Empirical"],"xaxis":"x","y":[0.041289573538579254,0.08422824438184413,0.36819734508326385,0.1777843066829689],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"asset=AMD\u003cbr\u003eindex=%{x}\u003cbr\u003evalue=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"AMD","marker":{"color":"#EF553B","pattern":{"shape":""}},"name":"AMD","offsetgroup":"AMD","orientation":"v","showlegend":true,"textposition":"auto","x":["Factor Model 1","Factor Model 2","Factor Model 3","Empirical"],"xaxis":"x","y":[0.001317375248319479,0.006578518608081501,0.0,0.0781176234880348],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"asset=JPM\u003cbr\u003eindex=%{x}\u003cbr\u003evalue=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"JPM","marker":{"color":"#00cc96","pattern":{"shape":""}},"name":"JPM","offsetgroup":"JPM","orientation":"v","showlegend":true,"textposition":"auto","x":["Factor Model 1","Factor Model 2","Factor Model 3","Empirical"],"xaxis":"x","y":[0.0,0.04748232621538579,0.0,0.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"asset=XOM\u003cbr\u003eindex=%{x}\u003cbr\u003evalue=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"XOM","marker":{"color":"#ab63fa","pattern":{"shape":""}},"name":"XOM","offsetgroup":"XOM","orientation":"v","showlegend":true,"textposition":"auto","x":["Factor Model 1","Factor Model 2","Factor Model 3","Empirical"],"xaxis":"x","y":[0.0,0.04546971507462191,0.0,0.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"asset=AAPL\u003cbr\u003eindex=%{x}\u003cbr\u003evalue=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"AAPL","marker":{"color":"#FFA15A","pattern":{"shape":""}},"name":"AAPL","offsetgroup":"AAPL","orientation":"v","showlegend":true,"textposition":"auto","x":["Factor Model 1","Factor Model 2","Factor Model 3","Empirical"],"xaxis":"x","y":[0.0,0.03977762518366358,0.0,0.10156265499984848],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"asset=CVX\u003cbr\u003eindex=%{x}\u003cbr\u003evalue=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"CVX","marker":{"color":"#19d3f3","pattern":{"shape":""}},"name":"CVX","offsetgroup":"CVX","orientation":"v","showlegend":true,"textposition":"auto","x":["Factor Model 1","Factor Model 2","Factor Model 3","Empirical"],"xaxis":"x","y":[0.0,0.03162062835251457,0.0,0.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"asset=BAC\u003cbr\u003eindex=%{x}\u003cbr\u003evalue=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"BAC","marker":{"color":"#FF6692","pattern":{"shape":""}},"name":"BAC","offsetgroup":"BAC","orientation":"v","showlegend":true,"textposition":"auto","x":["Factor Model 1","Factor Model 2","Factor Model 3","Empirical"],"xaxis":"x","y":[0.0,0.02184080308961344,0.0,0.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"asset=GE\u003cbr\u003eindex=%{x}\u003cbr\u003evalue=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"GE","marker":{"color":"#B6E880","pattern":{"shape":""}},"name":"GE","offsetgroup":"GE","orientation":"v","showlegend":true,"textposition":"auto","x":["Factor Model 1","Factor Model 2","Factor Model 3","Empirical"],"xaxis":"x","y":[0.0,0.0142391438424794,0.0,0.0],"yaxis":"y","type":"bar"},{"alignmentgroup":"True","hovertemplate":"asset=BBY\u003cbr\u003eindex=%{x}\u003cbr\u003evalue=%{y}\u003cextra\u003e\u003c\u002fextra\u003e","legendgroup":"BBY","marker":{"color":"#FF97FF","pattern":{"shape":""}},"name":"BBY","offsetgroup":"BBY","orientation":"v","showlegend":true,"textposition":"auto","x":["Factor Model 1","Factor Model 2","Factor Model 3","Empirical"],"xaxis":"x","y":[0.0,0.008982981825560026,0.0,0.0189116953861056],"yaxis":"y","type":"bar"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"title":{"text":"Portfolios"}},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"Weight"},"tickformat":",.0%"},"legend":{"title":{"text":"asset"},"tracegroupgap":0,"yanchor":"top","y":0.99,"xanchor":"left","x":1.15},"margin":{"t":60},"barmode":"relative","title":{"text":"Portfolios Composition"}},                        {"responsive": true}                    )                };                            </script>        </div>
    </div>
    <br />
    <br />


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 3.522 seconds)


.. _sphx_glr_download_auto_examples_1_mean_risk_plot_13_factor_model.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: binder-badge

      .. image:: images/binder_badge_logo.svg
        :target: https://mybinder.org/v2/gh/skfolio/skfolio/gh-pages?urlpath=lab/tree/notebooks/auto_examples/1_mean_risk/plot_13_factor_model.ipynb
        :alt: Launch binder
        :width: 150 px

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: plot_13_factor_model.ipynb <plot_13_factor_model.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: plot_13_factor_model.py <plot_13_factor_model.py>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
